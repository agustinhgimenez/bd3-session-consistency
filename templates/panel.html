<!-- templates/panel.html -->
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>{{node_name}}</title>
  <style>
    body {background:#000;color:#ddd;font-family:monospace;padding:20px;}
    h1 {color:{{color}};}
    input,button {padding:6px;margin:4px;}
    pre {background:#111;padding:10px;border-radius:8px;white-space:pre-wrap;}
    a.btn {background:{{color}};color:#000;padding:5px 10px;border-radius:5px;text-decoration:none;}
    .cols {display:flex;gap:20px;align-items:flex-start;}
    .box {flex:1;}
  </style>
</head>
<body>
  <h1>{{node_name}}</h1>
  <p>Puerto: {{port}} â€” Ãšltima actualizaciÃ³n: {{now}}</p>

  {% if not session_user %}
    <form method="post" action="/login">
      <input name="username" placeholder="Usuario (session_id)" required>
      <button type="submit">Ingresar</button>
    </form>
  {% else %}
    <p>ðŸŸ¢ SesiÃ³n activa: <b>{{session_user}}</b> (<a href="/logout">cerrar</a>)</p>

    <div class="cols">
      <div class="box">
        <h3>Escritura</h3>
        <form method="post" action="/write">
          <input name="product_id" placeholder="ID producto" required>
          <input name="name" placeholder="Nombre">
          <input name="stock" placeholder="Stock" type="number">
          <input name="price" placeholder="Precio" type="number">
          <input name="location" placeholder="UbicaciÃ³n">
          <button type="submit">WRITE</button>
        </form>

        <h3>Lectura</h3>
        <form method="get" action="/read">
          <input name="product_id" placeholder="ID producto" required>
          <button type="submit">READ</button>
        </form>

        <p><a class="btn" href="/sync">ðŸ”„ Sincronizar nodos</a></p>
      </div>

      <div class="box">
        <h3>Token de sesiÃ³n (clave â†’ versiÃ³n mÃ­nima vista)</h3>
        <pre>{{session_token_pretty}}</pre>
      </div>
    </div>
  {% endif %}

  <h2>Productos almacenados (con versiÃ³n)</h2>
  <pre>{{products_pretty}}</pre>

</body>
</html>
